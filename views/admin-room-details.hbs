<h1>Room Details</h1>

<!-- Room Type Filter -->
    <label for="roomTypeFilter">Filter by Room Type:</label>
    <select id="roomTypeFilter" onchange="filterRooms()">
        <option value="">All</option>
        <option value="DQ">Deluxe Queen</option>
        <option value="DT">Deluxe Twin</option>
        <option value="PRMR">Premiere</option>
        <option value="DORM">Dormitory</option>
    </select>

<form method="GET" action="/admin-room-details" style="margin-bottom: 20px;">
    <label for="roomNum">Search Room Number:</label>
    <input type="text" id="roomNum" name="roomNum" placeholder="Enter Room Number">
    <button type="submit">Search</button>
</form>

<table>
    <thead>
        <tr style="border-spacing: 15px;"> <!-- Add inline style for spacing -->
            <th style="padding: 10px;">Room Number</th>
            <th style="padding: 10px;">Room Type</th>
            <th style="padding: 10px;">Status</th>
        </tr>
    </thead>
    <tbody id="roomDetailsTable">
            {{#each rooms}}
            <tr data-room-type="{{this.roomType}}">
            <td>{{this.roomNum}}</td>
            <td>{{this.roomType}}</td>
            <td>
            <form method="POST" action="/admin-room-status/{{this._id}}">
                <select name="status" onchange="this.form.submit()">
                    <option value="VR" {{#ifEquals this.status "VR"}}selected{{/ifEquals}}>Vacant Ready</option>
                    <option value="VC" {{#ifEquals this.status "VC"}}selected{{/ifEquals}}>Vacant Clean</option>
                    <option value="OCC" {{#ifEquals this.status "OCC"}}selected{{/ifEquals}}>Occupied</option>
                    <option value="DND" {{#ifEquals this.status "DND"}}selected{{/ifEquals}}>Do Not Disturb</option>
                    <option value="RS" {{#ifEquals this.status "RS"}}selected{{/ifEquals}}>Reserved</option>
                </select>
            </form>
        </td>
        </tr>
        {{/each}}
    </tbody>
</table>

<script>
    function filterRooms() {
        const filterValue = document.getElementById('roomTypeFilter').value;
        const rows = document.querySelectorAll('#roomDetailsTable tr');

        rows.forEach(row => {
            const roomType = row.getAttribute('data-room-type');
            if (filterValue === '' || roomType === filterValue) {
                row.style.display = ''; // Show the row
            } else {
                row.style.display = 'none'; // Hide the row
            }
        });
    }
</script>